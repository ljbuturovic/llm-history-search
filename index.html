<!DOCTYPE html>
<html>
<head>
  <title>llm-history-search</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      max-width: 900px;
      margin: 50px auto;
      padding: 0 20px;
      background: #f5f5f5;
    }
    h1 {
      color: #333;
      margin-bottom: 30px;
    }
    h2 {
      font-size: 22px;
      margin-bottom: 5px;
      text-align: center;
    }
    .subtitle {
      text-align: center;
      color: #666;
      margin-top: 0;
      margin-bottom: 30px;
      font-size: 16px;
    }
    .search-box {
      display: flex;
      gap: 10px;
      margin-bottom: 30px;
    }
    #searchQuery {
      flex: 1;
      padding: 12px 16px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 16px;
    }
    button {
      padding: 12px 32px;
      background: #007bff;
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 16px;
      cursor: pointer;
    }
    button:hover {
      background: #0056b3;
    }
    #results {
      background: white;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .result-item {
      padding: 8px 0;
      border-bottom: 1px solid #eee;
    }
    .result-item:last-child {
      border-bottom: none;
    }
    .result-item a {
      color: #1a73e8;
      text-decoration: none;
      font-size: 16px;
    }
    .result-item a:hover {
      text-decoration: underline;
    }
    .time {
      color: #666;
      margin-left: 4px;
    }
  </style>
</head>
<body>
  <h2>llm-history-search: search your ChatGPT, Claude, Gemini, Grok conversations</h2>
  <p class="subtitle">(requires llm-history-search extension, available on <a href="https://chromewebstore.google.com/detail/conversai/hafalgcffhhmhjgeaciekloejcnadggi" target="_blank" style="color: #1a73e8;">Chrome Web Store</a>)</p>
  <div class="search-box">
    <input type="text" id="searchQuery" placeholder="Enter search query" onkeypress="if(event.key==='Enter') search()">
    <button onclick="search()">Search</button>
    <button onclick="clearData()" style="background: #dc3545;">Clear Data</button>
  </div>
  <div id="results"></div>

  <script>
    // Replace with your extension ID from chrome://extensions
    const EXTENSION_ID = 'hafalgcffhhmhjgeaciekloejcnadggi';

    async function search() {
      const query = document.getElementById('searchQuery').value;
      const resultsDiv = document.getElementById('results');
      resultsDiv.innerHTML = 'Searching...';

      try {
        const response = await new Promise((resolve, reject) => {
          chrome.runtime.sendMessage(
            EXTENSION_ID,
            { action: "SEARCH", query: query },
            response => {
              if (chrome.runtime.lastError) {
                reject(chrome.runtime.lastError);
              } else {
                resolve(response);
              }
            }
          );
        });

        if (response.results.length === 0) {
          resultsDiv.innerHTML = '<p>No results found.</p>';
        } else {
          resultsDiv.innerHTML = '';
          response.results.forEach(thread => {
            const date = new Date(thread.capturedAt).toLocaleString();
            const resultItem = document.createElement('div');
            resultItem.className = 'result-item';
            resultItem.innerHTML = `
              <a href="${thread.url}" target="_blank">${thread.provider}: ${thread.title}</a>
              <span class="time">(${date})</span>
            `;
            resultsDiv.appendChild(resultItem);
          });
        }
      } catch (error) {
        resultsDiv.innerHTML = `<p style="color: red;">Error: ${error.message}</p>`;
      }
    }

    async function clearData() {
      if (!confirm('Are you sure you want to clear all stored conversations?')) {
        return;
      }

      const resultsDiv = document.getElementById('results');
      resultsDiv.innerHTML = 'Clearing data...';

      try {
        await new Promise((resolve, reject) => {
          chrome.runtime.sendMessage(
            EXTENSION_ID,
            { action: "CLEAR" },
            response => {
              if (chrome.runtime.lastError) {
                reject(chrome.runtime.lastError);
              } else {
                resolve(response);
              }
            }
          );
        });
        resultsDiv.innerHTML = '<p style="color: green;">All data cleared successfully!</p>';
      } catch (error) {
        resultsDiv.innerHTML = `<p style="color: red;">Error: ${error.message}</p>`;
      }
    }
  </script>

  <div style="max-width: 900px; margin: 40px auto 20px; padding: 20px; background: white; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
    <h3 style="margin-top: 0; color: #333;">How to Use</h3>
    <ol style="color: #666; line-height: 1.8; padding-left: 20px;">
      <li>Install the <a href="https://chromewebstore.google.com/detail/conversai/hafalgcffhhmhjgeaciekloejcnadggi" target="_blank" style="color: #1a73e8;">llm-history-search extension</a></li>
      <li>Visit and use ChatGPT, Claude, Gemini, or Grok (conversations are automatically captured in the background)</li>
      <li>Point Chrome to <a href="https://conversai.us" target="_blank" style="color: #1a73e8;"><strong>conversai.us</strong></a> and search your conversations by keyword</li>
    </ol>

    <h3 style="color: #333;">Important Notes</h3>
    <ul style="color: #666; line-height: 1.8; padding-left: 20px;">
      <li>llm-history-search searches only conversations performed using Chrome on a single computer, not across computers</li>
      <li>llm-history-search searches only conversations performed after the extension has been installed. To search prior conversations, you must re-visit them after installing llm-history-search</li>
      <li><strong>Target audience:</strong> people accessing multiple LLMs from a single computer via Chrome</li>
    </ul>
  </div>

  <div style="max-width: 900px; margin: 20px auto; padding: 20px; background: white; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
    <h3 style="margin-top: 0; color: #333;">Privacy</h3>
    <p style="color: #666; line-height: 1.6;">
      llm-history-search processes and stores your chat content locally in your
      browser and your device to provide search across ChatGPT, Claude, Gemini and
      Grok. llm-history-search does not collect, transmit, or sell your chat content
      to our servers or third parties. All processing and storage happen on your device only. You can remove the extension at any time from your
      browser's extension management page. Removing the extension automatically deletes all locally stored data.
    </p>
  </div>

  <div style="max-width: 900px; margin: 20px auto 40px; padding: 15px; text-align: center;">
    <p style="color: #999; font-size: 14px; margin: 0;">Created by Ljubomir Buturovic, East Palo Alto, California</p>
  </div>
</body>
</html>
